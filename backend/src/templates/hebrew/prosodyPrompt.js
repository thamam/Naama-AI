/**
 * Hebrew Prosody Activity Prompt Template
 * Phase 2.5: Syllable counting, stress patterns, rhythm, and intonation exercises
 */

export const generateProsodyPrompt = (params) => {
  const {
    ageGroup,
    itemCount,
    prosodyType = 'mixed', // syllable, stress, rhythm, intonation, mixed
    theme,
    nikudLevel = 'full'
  } = params;

  const ageGuidelines = {
    '2-3': 'תרגילי קצב פשוטים, ספירת הברות במילים קצרות (1-2 הברות), דפוסי טפיחה בסיסיים',
    '3-4': 'ספירת הברות במילים בינוניות (2-3 הברות), דפוסי קצב, הבחנה בין משפטי שאלה וקביעה',
    '4-6': 'ספירת הברות במילים מורכבות, דפוסי לחץ, אינטונציה מגוונת, תרגילי קצב מתקדמים'
  };

  const prosodyTypeGuidance = {
    'syllable': 'התמקד בספירת הברות וזיהוי גבולות הברות',
    'stress': 'התמקד בזיהוי ההברה המודגשת במילה',
    'rhythm': 'התמקד בדפוסי קצב וטפיחה',
    'intonation': 'התמקד באינטונציה (עליות וירידות בגובה הטון)',
    'mixed': 'שלב מספר היבטים פרוסודיים'
  };

  const hebrewProsodyGuidance = `
**מאפייני פרוסודיה בעברית:**
- הברות בעברית: בדרך כלל עיצור+תנועה (CV) או עיצור+תנועה+עיצור (CVC)
- דגש: בדרך כלל על ההברה האחרונה או הלפני-אחרונה
- אינטונציה:
  * משפט קביעה: ירידה בסוף
  * משפט שאלה: עלייה בסוף
  * רגש: וריאציות בגובה ובעוצמה
- קצב: עברית היא שפת "stress-timing" (לחץ בזמנים קבועים)

**התאמה לגיל:**
- 2-3: טפיחה על הברות, חיקוי דפוסי קצב פשוטים
- 3-4: ספירה מודעת של הברות, הבחנה בין שאלה לקביעה
- 4-6: זיהוי דפוסי לחץ, שליטה באינטונציה, יצירת דפוסי קצב
`;

  return `אתה קלינאית תקשורת מומחית המתמחה בפרוסודיה ועברית, יוצרת תרגילי פרוסודיה לילדים בגילאי ${ageGroup} שנים.

צור פעילות פרוסודיה בעברית המתמקדת ב${prosodyTypeGuidance[prosodyType]}.

**דרישות הפעילות:**
- התאמה לגיל: ${ageGuidelines[ageGroup]}
- סוג פרוסודיה: ${prosodyType}
- מספר תרגילים/פריטים: ${itemCount || 'מתאים לגיל'}
${theme ? `- נושא: ${theme}` : ''}
- כל התרגילים חייבים להיות מעשיים וניתנים לביצוע
- כלול הדרכה ויזואלית (איורים, סימנים)
${hebrewProsodyGuidance}

**דרישות ניקוד:**
- כלול ניקוד מלא להדגשת תנועות והברות
- סמן את ההברה המודגשת בבירור (למשל: באותיות מודגשות או קו תחתון)

**פורמט פלט (JSON):**
החזר **אך ורק** אובייקט JSON תקין במבנה המדויק הזה:
{
  "title": "תרגילי קצב ופרוסודיה בעברית",
  "instructions": "הנחיות מפורטות לקלינאית כיצד לבצע את התרגילים. כלול טכניקות ויזואליות וקוליות.",
  "ageGroup": "${ageGroup}",
  "prosodyType": "${prosodyType}",
  "exercises": [
    {
      "type": "syllable|stress|rhythm|intonation",
      "word": "מִילָה או מִשְׁפָּט בניקוד",
      "syllableCount": מספר_הברות,
      "syllableBreakdown": "פי-רוק-הב-רות",
      "stressedSyllable": מספר_ההברה_המודגשת,
      "rhythmPattern": "תיאור דפוס הקצב (למשל: טָה-טָה-תַם)",
      "visualCue": "תיאור ייצוג חזותי (למשל: עיגולים לכל הברה, עיגול גדול להברה מודגשת)",
      "audioGuidance": "הנחיות להדגמה קולית",
      "activity": "פעילות מעשית (טפיחה, קפיצה, ציור, וכו')",
      "difficulty": "easy|medium|hard",
      "goal": "מטרת התרגיל הספציפי"
    }
  ],
  "rhythmGames": [
    "משחק קצב 1: תיאור מפורט",
    "משחק קצב 2: תיאור מפורט"
  ],
  "visualAids": [
    "עזר ויזואלי 1: תיאור כיצד להשתמש בו",
    "עזר ויזואלי 2: תיאור כיצד להשתמש בו"
  ],
  "tips": "טיפים כלליים להוראת פרוסודיה בגיל זה. כלול טיפים לילדים עם קשיים ספציפיים.",
  "progressionSuggestions": "כיצד להתקדם לתרגילים מורכבים יותר",
  "assessmentGuidance": "כיצד להעריך התקדמות פרוסודית",
  "musicalConnections": "קשרים למוזיקה ושירים שיכולים לסייע בתרגול"
}

**חשוב מאוד:**
- החזר **אך ורק** את אובייקט ה-JSON, ללא טקסט נוסף
- כל תרגיל חייב להיות מעשי וברור
- כלול ניקוד מדויק מלא
- השתמש בדוגמאות שמחוברות לחוויות הילדים (שירים, משחקים, פעולות יומיומיות)
- רמזים חזותיים חייבים להיות פשוטים ואינטואיטיביים
- תרגילים צריכים להיות מהנים ומשחקיים, לא טכניים
- התאם את הסיבוכיות לגיל - לגילאים צעירים השתמש בשפה פשוטה מאוד

זכור: הפלט חייב להיות JSON תקין בלבד, ללא markdown או טקסט נוסף.`;
};

export default generateProsodyPrompt;
